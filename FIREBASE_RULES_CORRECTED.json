{
  "rules": {
    ".read": false,
    ".write": false,

    "admin_settings": {
      ".read": "auth != null",
      ".write": "auth != null && auth.token.email === 'gokul.offl.08@gmail.com'",
      "full_locked": {
        ".validate": "!newData.exists() || newData.isBoolean()"
      },
      "feature_locks": {
        ".validate": "!newData.exists() || newData.hasChildren()"
      }
    },

    "products": {
      ".read": true,
      ".indexOn": ["category_id", "featured", "best_selling", "might_you_like", "createdAt", "in_stock"],
      "$productId": {
        ".write": "auth != null",
        ".validate": "(!data.exists() && newData.hasChildren(['name', 'description', 'price', 'image_url', 'in_stock', 'createdAt']) && (newData.hasChild('category_id') || newData.hasChild('category_ids'))) || (data.exists() && newData.hasChild('name') && newData.hasChild('description') && newData.hasChild('price') && newData.hasChild('image_url') && newData.hasChild('in_stock') && newData.hasChild('createdAt') && (newData.hasChild('category_id') || newData.hasChild('category_ids')))",
        "name": {
          ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 200"
        },
        "slug": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "description": {
          ".validate": "newData.isString() && newData.val().length <= 1000"
        },
        "price": {
          ".validate": "newData.isNumber() && newData.val() >= 0"
        },
        "compare_at_price": {
          ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 0) || newData.val() === null"
        },
        "image_url": {
          ".validate": "newData.isString() && newData.val().matches(/^https?:.+/)"
        },
        "gallery_images": {
          ".validate": "!newData.exists() || newData.hasChildren()"
        },
        "video_url": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "category_id": {
          ".validate": "!newData.exists() || (newData.isString() && newData.val().length > 0)"
        },
        "category_ids": {
          ".validate": "!newData.exists() || newData.hasChildren()"
        },
        "in_stock": {
          ".validate": "newData.isBoolean()"
        },
        "featured": {
          ".validate": "!newData.exists() || newData.isBoolean()"
        },
        "best_selling": {
          ".validate": "!newData.exists() || newData.isBoolean()"
        },
        "might_you_like": {
          ".validate": "!newData.exists() || newData.isBoolean()"
        },
        "sizes": {
          ".validate": "!newData.exists() || newData.hasChildren()"
        },
        "colors": {
          ".validate": "!newData.exists() || newData.hasChildren()"
        },
        "default_size": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "default_color": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "size_pricing": {
          ".validate": "!newData.exists() || newData.hasChildren()"
        },
        "try_on_enabled": {
          ".validate": "!newData.exists() || newData.isBoolean()"
        },
        "try_on_image_url": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "hairclip_type": {
          ".validate": "!newData.exists() || (newData.isString() && (newData.val() === 'side' || newData.val() === 'top' || newData.val() === 'back' || newData.val() === 'headband' || newData.val() === 'full'))"
        },
        "availableColors": {
          ".validate": "!newData.exists() || newData.hasChildren()"
        },
        "createdAt": {
          ".validate": "newData.isString()"
        },
        "$other": {
          ".validate": false
        }
      }
    },

    "categories": {
      ".read": true,
      ".indexOn": ["name"],
      "$categoryId": {
        ".write": "auth != null",
        ".validate": "newData.hasChildren(['name', 'description', 'image_url'])",
        "name": {
          ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 100"
        },
        "description": {
          ".validate": "newData.isString() && newData.val().length <= 500"
        },
        "image_url": {
          ".validate": "newData.isString() && newData.val().matches(/^https?:.+/)"
        },
        "featured": {
          ".validate": "!newData.exists() || newData.isBoolean()"
        },
        "new_arrival": {
          ".validate": "!newData.exists() || newData.isBoolean()"
        },
        "bg_color": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "$other": {
          ".validate": false
        }
      }
    },

    "navigation_settings": {
      ".read": true,
      ".write": "auth != null",
      ".validate": "newData.hasChildren(['background', 'text', 'activeTab', 'inactiveButton', 'borderRadius', 'buttonSize', 'themeMode'])",
      "background": {
        ".validate": "newData.isString() && newData.val().matches(/^#[0-9a-fA-F]{6}$|^#[0-9a-fA-F]{8}$/)"
      },
      "text": {
        ".validate": "newData.isString() && newData.val().matches(/^#[0-9a-fA-F]{6}$|^#[0-9a-fA-F]{8}$/)"
      },
      "activeTab": {
        ".validate": "newData.isString() && newData.val().matches(/^#[0-9a-fA-F]{6}$|^#[0-9a-fA-F]{8}$/)"
      },
      "inactiveButton": {
        ".validate": "newData.isString() && newData.val().matches(/^#[0-9a-fA-F]{6}$|^#[0-9a-fA-F]{8}$/)"
      },
      "borderRadius": {
        ".validate": "newData.isString() && (newData.val() === 'none' || newData.val() === 'sm' || newData.val() === 'md' || newData.val() === 'lg' || newData.val() === 'xl' || newData.val() === '2xl' || newData.val() === 'full')"
      },
      "buttonSize": {
        ".validate": "newData.isString() && (newData.val() === 'sm' || newData.val() === 'md' || newData.val() === 'lg' || newData.val() === 'xl')"
      },
      "themeMode": {
        ".validate": "!newData.exists() || newData.isString()"
      },
      "buttonLabels": {
        ".validate": "!newData.exists() || newData.hasChildren()",
        "home": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "shop": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "search": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "cart": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "myOrders": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "login": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "signOut": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "admin": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "$other": {
          ".validate": false
        }
      },
      "$other": {
        ".validate": false
      }
    },

    "carousel_images": {
      ".read": true,
      ".write": "auth != null"
    },

    "carousel_settings": {
      ".read": true,
      ".write": "auth != null",
      "is_visible": {
        ".validate": "!newData.exists() || newData.isBoolean()"
      },
      "autoplay": {
        ".validate": "!newData.exists() || newData.isBoolean()"
      },
      "interval": {
        ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 1000)"
      },
      "show_indicators": {
        ".validate": "!newData.exists() || newData.isBoolean()"
      },
      "show_navigation": {
        ".validate": "!newData.exists() || newData.isBoolean()"
      }
    },

    "video_sections": {
      ".read": true,
      ".write": "auth != null",
      ".indexOn": ["order", "isVisible"],
      "$videoId": {
        ".validate": "newData.hasChildren(['url', 'order', 'isVisible'])",
        "url": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "title": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "description": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "order": {
          ".validate": "newData.isNumber() && newData.val() >= 0"
        },
        "isVisible": {
          ".validate": "newData.isBoolean()"
        },
        "$other": {
          ".validate": false
        }
      }
    },

    "video_section_settings": {
      ".read": true,
      ".write": "auth != null",
      "is_visible": {
        ".validate": "!newData.exists() || newData.isBoolean()"
      },
      "section_title": {
        ".validate": "!newData.exists() || (newData.isString() && newData.val().length > 0 && newData.val().length <= 200)"
      },
      "section_subtitle": {
        ".validate": "!newData.exists() || (newData.isString() && newData.val().length <= 500)"
      }
    },

    "orders": {
      ".read": "auth != null",
      "$orderId": {
        ".read": "auth != null",
        ".write": "!data.exists() || auth != null",
        ".validate": "newData.hasChildren(['userId', 'items', 'totalAmount', 'status', 'createdAt']) || newData.hasChildren(['customer_name', 'customer_email', 'customer_phone', 'shipping_address', 'total_amount', 'payment_status', 'order_status', 'created_at', 'order_items']) || newData.hasChildren(['user_id', 'customer_name', 'customer_email', 'customer_phone', 'shipping_address', 'total_amount', 'payment_status', 'order_status', 'created_at', 'order_items'])",
        "userId": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "user_id": {
          ".validate": "!newData.exists() || newData.isString() || newData.val() === null"
        },
        "items": {
          ".validate": "newData.hasChildren()",
          "$item": {
            ".validate": "newData.hasChildren(['productId', 'quantity', 'price'])"
          }
        },
        "totalAmount": {
          ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 0)"
        },
        "total_amount": {
          ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 0)"
        },
        "status": {
          ".validate": "!newData.exists() || (newData.isString() && (newData.val() === 'pending' || newData.val() === 'processing' || newData.val() === 'completed' || newData.val() === 'cancelled'))"
        },
        "payment_status": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "order_status": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "customer_name": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "customer_email": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "customer_phone": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "shipping_address": {
          ".validate": "!newData.exists() || newData.hasChildren()"
        },
        "order_items": {
          ".validate": "!newData.exists() || newData.hasChildren()"
        },
        "created_at": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "razorpay_order_id": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "razorpay_payment_id": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "razorpay_signature": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "verification_error": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "paymentId": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "shippingAddress": {
          ".validate": "!newData.exists() || newData.hasChildren(['name', 'phone', 'address', 'city', 'state', 'pincode'])"
        },
        "createdAt": {
          ".validate": "newData.isString()"
        },
        "updatedAt": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "updated_at": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "dispatch_details": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "subtotal": {
          ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 0)"
        },
        "shipping_charge": {
          ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 0)"
        },
        "tax_amount": {
          ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 0)"
        },
        "tax_percentage": {
          ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 0)"
        },
        "tax_label": {
          ".validate": "!newData.exists() || newData.isString() || newData.val() === null"
        },
        "gst_number": {
          ".validate": "!newData.exists() || newData.isString() || newData.val() === null"
        },
        "discount": {
          ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 0)"
        },
        "coupon_code": {
          ".validate": "!newData.exists() || newData.isString() || newData.val() === null"
        },
        "coupon_discount_type": {
          ".validate": "!newData.exists() || newData.isString() || newData.val() === null"
        },
        "coupon_discount_value": {
          ".validate": "!newData.exists() || (newData.isNumber() && newData.val() >= 0) || newData.val() === null"
        },
        "$other": {
          ".validate": false
        }
      }
    },

    "users": {
      ".read": "auth != null",
      "$userId": {
        ".read": "auth != null",
        ".write": "auth != null",
        ".validate": "newData.hasChildren(['createdAt']) || newData.hasChildren(['email', 'createdAt']) || newData.hasChildren(['created_at'])",
        "email": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "displayName": {
          ".validate": "!newData.exists() || (newData.isString() && newData.val().length <= 100)"
        },
        "phone": {
          ".validate": "!newData.exists() || (newData.isString() && newData.val().matches(/^[0-9+\\-\\s()]{10,15}$/))"
        },
        "createdAt": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "created_at": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "welcome_coupon_shown": {
          ".validate": "!newData.exists() || newData.isBoolean()"
        },
        "welcome_coupon_code": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "welcome_coupon_shown_at": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "$other": {
          ".validate": false
        }
      }
    },

    "admins": {
      ".read": "auth != null",
      "$adminId": {
        ".write": "auth != null",
        ".validate": "newData.isBoolean()"
      }
    },

    "super_admins": {
      ".read": "auth != null",
      "$superAdminId": {
        ".write": "auth != null",
        ".validate": "newData.isBoolean()"
      }
    },

    "policies": {
      ".read": true,
      "$policyKey": {
        ".write": "auth != null",
        ".validate": "newData.hasChildren(['title', 'content', 'isEnabled'])",
        "title": {
          ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 200"
        },
        "content": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "isEnabled": {
          ".validate": "newData.isBoolean()"
        },
        "$other": {
          ".validate": false
        }
      }
    },

    "reviews": {
      ".read": true,
      ".indexOn": ["productId", "isApproved", "createdAt"],
      "$reviewId": {
        ".write": "auth != null",
        ".validate": "newData.hasChildren(['userId', 'productId', 'rating', 'comment', 'createdAt']) || newData.hasChildren(['customer_name', 'review_text', 'is_active', 'created_at'])",
        "userId": {
          ".validate": "!newData.exists() || newData.isString()"
        },
        "productId": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "rating": {
          ".validate": "newData.isNumber() && newData.val() >= 1 && newData.val() <= 5"
        },
        "comment": {
          ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 1000"
        },
        "isApproved": {
          ".validate": "!newData.exists() || newData.isBoolean()"
        },
        "createdAt": {
          ".validate": "newData.isString()"
        },
        "$other": {
          ".validate": false
        }
      }
    },

    "site_settings": {
      ".read": true,
      "$settingKey": {
        ".write": "auth != null"
      }
    },

    "favorites": {
      ".read": false,
      "$userId": {
        ".read": "auth != null && auth.uid === $userId",
        ".write": "auth != null && auth.uid === $userId",
        "$productId": {
          ".validate": "newData.isBoolean()"
        }
      }
    },

    "cart": {
      ".read": false,
      "$userId": {
        ".read": "auth != null && auth.uid === $userId",
        ".write": "auth != null && auth.uid === $userId",
        "$productId": {
          ".validate": "newData.hasChildren(['quantity', 'addedAt'])",
          "quantity": {
            ".validate": "newData.isNumber() && newData.val() > 0"
          },
          "addedAt": {
            ".validate": "newData.isString()"
          }
        }
      }
    },

    "site_content": {
      ".read": true,
      "$contentKey": {
        ".write": "auth != null"
      }
    },

    "social_links": {
      ".read": true,
      ".write": "auth != null",
      "$linkId": {
        ".validate": "newData.hasChildren(['platform', 'url', 'icon', 'order'])",
        "platform": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "url": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "icon": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "order": {
          ".validate": "newData.isNumber() && newData.val() >= 0"
        },
        "$other": {
          ".validate": false
        }
      }
    },

    "settings": {
      ".read": true,
      "$settingId": {
        ".write": "auth != null"
      }
    },

    "offers": {
      ".read": true,
      "$offerId": {
        ".write": "auth != null"
      }
    },

    "marquee": {
      ".read": true,
      ".write": "auth != null"
    },

    "coupons": {
      ".read": true,
      ".indexOn": ["code", "is_active", "valid_from", "valid_until"],
      "$couponId": {
        ".write": "auth != null"
      }
    },

    "homepage_sections": {
      ".read": true,
      ".write": "auth != null"
    },

    "default_sections_visibility": {
      ".read": true,
      ".write": "auth != null"
    },

    "info_sections": {
      ".read": true,
      ".write": "auth != null"
    },

    "card_designs": {
      ".read": true,
      ".write": "auth != null"
    },

    "try_on_models": {
      ".read": true,
      ".write": "auth != null"
    },

    "tax_settings": {
      ".read": true,
      ".write": "auth != null"
    },

    "footer_settings": {
      ".read": true,
      ".write": "auth != null"
    },

    "footer_config": {
      ".read": true,
      ".write": "auth != null"
    },

    "bill_settings": {
      ".read": true,
      ".write": "auth != null"
    },

    "video_overlay_sections": {
      ".read": true,
      ".write": "auth != null"
    },

    "video_overlay_items": {
      ".read": true,
      ".write": "auth != null"
    },

    "marquee_sections": {
      ".read": true,
      ".write": "auth != null"
    }
  }
}
